{"ast":null,"code":"\"use strict\";\n\nvar inheritFrom = require(\"../utils\").inheritFrom;\n\nmodule.exports = function (core) {\n  core.CharacterData = function CharacterData(ownerDocument, data) {\n    core.Node.call(this, ownerDocument);\n    this._data = data;\n  };\n\n  inheritFrom(core.Node, core.CharacterData, {\n    get data() {\n      return this._data;\n    },\n\n    set data(data) {\n      if (data === null) {\n        data = \"\";\n      }\n\n      data = String(data);\n\n      this._setData(data);\n    },\n\n    get length() {\n      return this._data.length;\n    },\n\n    substringData: function (offset, count) {\n      offset = offset >>> 0;\n      count = count >>> 0;\n      var length = this.length;\n\n      if (offset > length) {\n        throw new core.DOMException(core.DOMException.INDEX_SIZE_ERR);\n      }\n\n      if (offset + count > length) {\n        return this._data.substring(offset);\n      }\n\n      return this._data.substring(offset, offset + count);\n    },\n    appendData: function (data) {\n      this.replaceData(this.length, 0, data);\n    },\n    insertData: function (offset, data) {\n      this.replaceData(offset, 0, data);\n    },\n    deleteData: function (offset, count) {\n      this.replaceData(offset, count, \"\");\n    },\n    replaceData: function (offset, count, data) {\n      offset = offset >>> 0;\n      count = count >>> 0;\n      data = String(data);\n      var length = this.length;\n\n      if (offset > length) {\n        throw new core.DOMException(core.DOMException.INDEX_SIZE_ERR);\n      }\n\n      if (offset + count > length) {\n        count = length - offset;\n      }\n\n      var start = this._data.substring(0, offset);\n\n      var end = this._data.substring(offset + count);\n\n      this._setData(start + data + end); // TODO: range stuff\n\n    },\n    _setData: function (newData) {\n      // TODO: remove this once we no longer rely on mutation events internally, since they are nonstandard\n      var oldData = this._data;\n      this._data = newData;\n\n      if (this._ownerDocument && this._parentNode && this._ownerDocument.implementation._hasFeature(\"MutationEvents\")) {\n        var ev = this._ownerDocument.createEvent(\"MutationEvents\");\n\n        ev.initMutationEvent(\"DOMCharacterDataModified\", true, false, this, oldData, newData, null, null);\n        this.dispatchEvent(ev);\n      }\n    }\n  });\n};","map":{"version":3,"sources":["F:/JavaScript/Projects/chemistryphile/node_modules/jsdom-no-contextify/lib/jsdom/living/character-data.js"],"names":["inheritFrom","require","module","exports","core","CharacterData","ownerDocument","data","Node","call","_data","String","_setData","length","substringData","offset","count","DOMException","INDEX_SIZE_ERR","substring","appendData","replaceData","insertData","deleteData","start","end","newData","oldData","_ownerDocument","_parentNode","implementation","_hasFeature","ev","createEvent","initMutationEvent","dispatchEvent"],"mappings":"AAAA;;AACA,IAAIA,WAAW,GAAGC,OAAO,CAAC,UAAD,CAAP,CAAoBD,WAAtC;;AAEAE,MAAM,CAACC,OAAP,GAAiB,UAAUC,IAAV,EAAgB;AAC/BA,EAAAA,IAAI,CAACC,aAAL,GAAqB,SAASA,aAAT,CAAuBC,aAAvB,EAAsCC,IAAtC,EAA4C;AAC/DH,IAAAA,IAAI,CAACI,IAAL,CAAUC,IAAV,CAAe,IAAf,EAAqBH,aAArB;AAEA,SAAKI,KAAL,GAAaH,IAAb;AACD,GAJD;;AAMAP,EAAAA,WAAW,CAACI,IAAI,CAACI,IAAN,EAAYJ,IAAI,CAACC,aAAjB,EAAgC;AACzC,QAAIE,IAAJ,GAAW;AAAE,aAAO,KAAKG,KAAZ;AAAoB,KADQ;;AAEzC,QAAIH,IAAJ,CAASA,IAAT,EAAe;AACb,UAAIA,IAAI,KAAK,IAAb,EAAmB;AACjBA,QAAAA,IAAI,GAAG,EAAP;AACD;;AACDA,MAAAA,IAAI,GAAGI,MAAM,CAACJ,IAAD,CAAb;;AAEA,WAAKK,QAAL,CAAcL,IAAd;AACD,KATwC;;AAWzC,QAAIM,MAAJ,GAAa;AACX,aAAO,KAAKH,KAAL,CAAWG,MAAlB;AACD,KAbwC;;AAezCC,IAAAA,aAAa,EAAE,UAAUC,MAAV,EAAkBC,KAAlB,EAAyB;AACtCD,MAAAA,MAAM,GAAGA,MAAM,KAAK,CAApB;AACAC,MAAAA,KAAK,GAAGA,KAAK,KAAK,CAAlB;AAEA,UAAIH,MAAM,GAAG,KAAKA,MAAlB;;AAEA,UAAIE,MAAM,GAAGF,MAAb,EAAqB;AACnB,cAAM,IAAIT,IAAI,CAACa,YAAT,CAAsBb,IAAI,CAACa,YAAL,CAAkBC,cAAxC,CAAN;AACD;;AAED,UAAIH,MAAM,GAAGC,KAAT,GAAiBH,MAArB,EAA6B;AAC3B,eAAO,KAAKH,KAAL,CAAWS,SAAX,CAAqBJ,MAArB,CAAP;AACD;;AAED,aAAO,KAAKL,KAAL,CAAWS,SAAX,CAAqBJ,MAArB,EAA6BA,MAAM,GAAGC,KAAtC,CAAP;AACD,KA9BwC;AAgCzCI,IAAAA,UAAU,EAAE,UAAUb,IAAV,EAAgB;AAC1B,WAAKc,WAAL,CAAiB,KAAKR,MAAtB,EAA8B,CAA9B,EAAiCN,IAAjC;AACD,KAlCwC;AAoCzCe,IAAAA,UAAU,EAAE,UAAUP,MAAV,EAAkBR,IAAlB,EAAwB;AAClC,WAAKc,WAAL,CAAiBN,MAAjB,EAAyB,CAAzB,EAA4BR,IAA5B;AACD,KAtCwC;AAwCzCgB,IAAAA,UAAU,EAAE,UAAUR,MAAV,EAAkBC,KAAlB,EAAyB;AACnC,WAAKK,WAAL,CAAiBN,MAAjB,EAAyBC,KAAzB,EAAgC,EAAhC;AACD,KA1CwC;AA4CzCK,IAAAA,WAAW,EAAE,UAAUN,MAAV,EAAkBC,KAAlB,EAAyBT,IAAzB,EAA+B;AAC1CQ,MAAAA,MAAM,GAAGA,MAAM,KAAK,CAApB;AACAC,MAAAA,KAAK,GAAGA,KAAK,KAAK,CAAlB;AACAT,MAAAA,IAAI,GAAGI,MAAM,CAACJ,IAAD,CAAb;AAEA,UAAIM,MAAM,GAAG,KAAKA,MAAlB;;AAEA,UAAIE,MAAM,GAAGF,MAAb,EAAqB;AACnB,cAAM,IAAIT,IAAI,CAACa,YAAT,CAAsBb,IAAI,CAACa,YAAL,CAAkBC,cAAxC,CAAN;AACD;;AAED,UAAIH,MAAM,GAAGC,KAAT,GAAiBH,MAArB,EAA6B;AAC3BG,QAAAA,KAAK,GAAGH,MAAM,GAAGE,MAAjB;AACD;;AAED,UAAIS,KAAK,GAAG,KAAKd,KAAL,CAAWS,SAAX,CAAqB,CAArB,EAAwBJ,MAAxB,CAAZ;;AACA,UAAIU,GAAG,GAAG,KAAKf,KAAL,CAAWS,SAAX,CAAqBJ,MAAM,GAAGC,KAA9B,CAAV;;AAEA,WAAKJ,QAAL,CAAcY,KAAK,GAAGjB,IAAR,GAAekB,GAA7B,EAlB0C,CAoB1C;;AACD,KAjEwC;AAmEzCb,IAAAA,QAAQ,EAAE,UAAUc,OAAV,EAAmB;AAC3B;AACA,UAAIC,OAAO,GAAG,KAAKjB,KAAnB;AACA,WAAKA,KAAL,GAAagB,OAAb;;AAEA,UAAI,KAAKE,cAAL,IAAuB,KAAKC,WAA5B,IAA2C,KAAKD,cAAL,CAAoBE,cAApB,CAAmCC,WAAnC,CAA+C,gBAA/C,CAA/C,EAAiH;AAC/G,YAAIC,EAAE,GAAG,KAAKJ,cAAL,CAAoBK,WAApB,CAAgC,gBAAhC,CAAT;;AACAD,QAAAA,EAAE,CAACE,iBAAH,CAAqB,0BAArB,EAAiD,IAAjD,EAAuD,KAAvD,EAA8D,IAA9D,EAAoEP,OAApE,EAA6ED,OAA7E,EAAsF,IAAtF,EAA4F,IAA5F;AACA,aAAKS,aAAL,CAAmBH,EAAnB;AACD;AACF;AA7EwC,GAAhC,CAAX;AA+ED,CAtFD","sourcesContent":["\"use strict\";\nvar inheritFrom = require(\"../utils\").inheritFrom;\n\nmodule.exports = function (core) {\n  core.CharacterData = function CharacterData(ownerDocument, data) {\n    core.Node.call(this, ownerDocument);\n\n    this._data = data;\n  };\n\n  inheritFrom(core.Node, core.CharacterData, {\n    get data() { return this._data; },\n    set data(data) {\n      if (data === null) {\n        data = \"\";\n      }\n      data = String(data);\n\n      this._setData(data);\n    },\n\n    get length() {\n      return this._data.length;\n    },\n\n    substringData: function (offset, count) {\n      offset = offset >>> 0;\n      count = count >>> 0;\n\n      var length = this.length;\n\n      if (offset > length) {\n        throw new core.DOMException(core.DOMException.INDEX_SIZE_ERR);\n      }\n\n      if (offset + count > length) {\n        return this._data.substring(offset);\n      }\n\n      return this._data.substring(offset, offset + count);\n    },\n\n    appendData: function (data) {\n      this.replaceData(this.length, 0, data);\n    },\n\n    insertData: function (offset, data) {\n      this.replaceData(offset, 0, data);\n    },\n\n    deleteData: function (offset, count) {\n      this.replaceData(offset, count, \"\");\n    },\n\n    replaceData: function (offset, count, data) {\n      offset = offset >>> 0;\n      count = count >>> 0;\n      data = String(data);\n\n      var length = this.length;\n\n      if (offset > length) {\n        throw new core.DOMException(core.DOMException.INDEX_SIZE_ERR);\n      }\n\n      if (offset + count > length) {\n        count = length - offset;\n      }\n\n      var start = this._data.substring(0, offset);\n      var end = this._data.substring(offset + count);\n\n      this._setData(start + data + end);\n\n      // TODO: range stuff\n    },\n\n    _setData: function (newData) {\n      // TODO: remove this once we no longer rely on mutation events internally, since they are nonstandard\n      var oldData = this._data;\n      this._data = newData;\n\n      if (this._ownerDocument && this._parentNode && this._ownerDocument.implementation._hasFeature(\"MutationEvents\")) {\n        var ev = this._ownerDocument.createEvent(\"MutationEvents\");\n        ev.initMutationEvent(\"DOMCharacterDataModified\", true, false, this, oldData, newData, null, null);\n        this.dispatchEvent(ev);\n      }\n    }\n  });\n};\n"]},"metadata":{},"sourceType":"script"}