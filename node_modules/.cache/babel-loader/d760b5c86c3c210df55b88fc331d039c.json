{"ast":null,"code":"\"use strict\";\n\nvar URL = require(\"url\");\n\nvar resolveHref = require(\"../utils\").resolveHref;\n\nfunction StateEntry(data, title, url) {\n  this.data = data;\n  this.title = title;\n  this.url = url;\n}\n\nmodule.exports = History;\n\nfunction History(window) {\n  this._states = [new StateEntry(null, \"\", window.location._url.href)];\n  this._index = 0;\n  this._window = window;\n  this._location = window.location;\n}\n\nHistory.prototype = {\n  constructor: History,\n\n  get length() {\n    return this._states.length;\n  },\n\n  get state() {\n    var state = this._states[this._index];\n    return state ? state.data : null;\n  },\n\n  back: function () {\n    this.go(-1);\n  },\n  forward: function () {\n    this.go(1);\n  },\n  go: function (delta) {\n    if (typeof delta === \"undefined\" || delta === 0) {\n      this._location.reload();\n\n      return;\n    }\n\n    var newIndex = this._index + delta;\n\n    if (newIndex < 0 || newIndex >= this.length) {\n      return;\n    }\n\n    this._index = newIndex;\n    var state = this._states[newIndex];\n\n    this._applyState(state);\n\n    this._signalPopstate(state);\n  },\n  pushState: function (data, title, url) {\n    var state = new StateEntry(data, title, url);\n\n    if (this._index + 1 !== this._states.length) {\n      this._states = this._states.slice(0, this._index + 1);\n    }\n\n    this._states.push(state);\n\n    this._applyState(state);\n\n    this._index++;\n  },\n  replaceState: function (data, title, url) {\n    var state = new StateEntry(data, title, url);\n    this._states[this._index] = state;\n\n    this._applyState(state);\n  },\n  _applyState: function (state) {\n    this._location._url = URL.parse(resolveHref(this._location._url.href, state.url));\n  },\n  _signalPopstate: function (state) {\n    if (this._window.document) {\n      var ev = this._window.document.createEvent(\"HTMLEvents\");\n\n      ev.initEvent(\"popstate\", false, false);\n      ev.state = state.data;\n      process.nextTick(function () {\n        this._window.dispatchEvent(ev);\n      }.bind(this));\n    }\n  },\n  toString: function () {\n    return \"[object History]\";\n  }\n};","map":{"version":3,"sources":["F:/JavaScript/Projects/chemistryphile/node_modules/jsdom-no-contextify/lib/jsdom/browser/history.js"],"names":["URL","require","resolveHref","StateEntry","data","title","url","module","exports","History","window","_states","location","_url","href","_index","_window","_location","prototype","constructor","length","state","back","go","forward","delta","reload","newIndex","_applyState","_signalPopstate","pushState","slice","push","replaceState","parse","document","ev","createEvent","initEvent","process","nextTick","dispatchEvent","bind","toString"],"mappings":"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","sourcesContent":["\"use strict\";\nvar URL = require(\"url\");\nvar resolveHref = require(\"../utils\").resolveHref;\n\nfunction StateEntry(data, title, url) {\n  this.data = data;\n  this.title = title;\n  this.url = url;\n}\n\nmodule.exports = History;\n\nfunction History(window) {\n  this._states = [new StateEntry(null, \"\", window.location._url.href)];\n  this._index = 0;\n  this._window = window;\n  this._location = window.location;\n}\n\nHistory.prototype = {\n  constructor: History,\n\n  get length() {\n    return this._states.length;\n  },\n\n  get state() {\n    var state = this._states[this._index];\n    return state ? state.data : null;\n  },\n\n  back: function () {\n    this.go(-1);\n  },\n\n  forward: function () {\n    this.go(1);\n  },\n\n  go: function (delta) {\n    if (typeof delta === \"undefined\" || delta === 0) {\n      this._location.reload();\n      return;\n    }\n\n    var newIndex = this._index + delta;\n\n    if (newIndex < 0 || newIndex >= this.length) {\n      return;\n    }\n\n    this._index = newIndex;\n\n    var state = this._states[newIndex];\n\n    this._applyState(state);\n    this._signalPopstate(state);\n  },\n\n  pushState: function (data, title, url) {\n    var state = new StateEntry(data, title, url);\n    if (this._index + 1 !== this._states.length) {\n      this._states = this._states.slice(0, this._index + 1);\n    }\n    this._states.push(state);\n    this._applyState(state);\n    this._index++;\n  },\n\n  replaceState: function (data, title, url) {\n    var state = new StateEntry(data, title, url);\n    this._states[this._index] = state;\n    this._applyState(state);\n  },\n\n  _applyState: function (state) {\n    this._location._url = URL.parse(resolveHref(this._location._url.href, state.url));\n  },\n\n  _signalPopstate: function(state) {\n    if (this._window.document) {\n      var ev = this._window.document.createEvent(\"HTMLEvents\");\n      ev.initEvent(\"popstate\", false, false);\n      ev.state = state.data;\n      process.nextTick(function () {\n        this._window.dispatchEvent(ev);\n      }.bind(this));\n    }\n  },\n\n  toString: function () {\n    return \"[object History]\";\n  }\n};\n"]},"metadata":{},"sourceType":"script"}