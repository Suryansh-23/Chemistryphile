{"ast":null,"code":"'use strict';\n\nvar DefaultTreeAdapter = require('../tree_adapters/default'),\n    Doctype = require('../common/doctype'),\n    Utils = require('../common/utils'),\n    HTML = require('../common/html'); //Aliases\n\n\nvar $ = HTML.TAG_NAMES,\n    NS = HTML.NAMESPACES; //Default serializer options\n\nvar DEFAULT_OPTIONS = {\n  encodeHtmlEntities: true\n}; //Escaping regexes\n\nvar AMP_REGEX = /&/g,\n    NBSP_REGEX = /\\u00a0/g,\n    DOUBLE_QUOTE_REGEX = /\"/g,\n    LT_REGEX = /</g,\n    GT_REGEX = />/g; //Escape string\n\nfunction escapeString(str, attrMode) {\n  str = str.replace(AMP_REGEX, '&amp;').replace(NBSP_REGEX, '&nbsp;');\n  if (attrMode) str = str.replace(DOUBLE_QUOTE_REGEX, '&quot;');else {\n    str = str.replace(LT_REGEX, '&lt;').replace(GT_REGEX, '&gt;');\n  }\n  return str;\n} //Enquote doctype ID\n//Serializer\n\n\nvar Serializer = module.exports = function (treeAdapter, options) {\n  this.treeAdapter = treeAdapter || DefaultTreeAdapter;\n  this.options = Utils.mergeOptions(DEFAULT_OPTIONS, options);\n}; //API\n\n\nSerializer.prototype.serialize = function (node) {\n  this.html = '';\n\n  this._serializeChildNodes(node);\n\n  return this.html;\n}; //Internals\n\n\nSerializer.prototype._serializeChildNodes = function (parentNode) {\n  var childNodes = this.treeAdapter.getChildNodes(parentNode);\n\n  if (childNodes) {\n    for (var i = 0, cnLength = childNodes.length; i < cnLength; i++) {\n      var currentNode = childNodes[i];\n      if (this.treeAdapter.isElementNode(currentNode)) this._serializeElement(currentNode);else if (this.treeAdapter.isTextNode(currentNode)) this._serializeTextNode(currentNode);else if (this.treeAdapter.isCommentNode(currentNode)) this._serializeCommentNode(currentNode);else if (this.treeAdapter.isDocumentTypeNode(currentNode)) this._serializeDocumentTypeNode(currentNode);\n    }\n  }\n};\n\nSerializer.prototype._serializeElement = function (node) {\n  var tn = this.treeAdapter.getTagName(node),\n      ns = this.treeAdapter.getNamespaceURI(node);\n  this.html += '<' + tn;\n\n  this._serializeAttributes(node);\n\n  this.html += '>';\n\n  if (tn !== $.AREA && tn !== $.BASE && tn !== $.BASEFONT && tn !== $.BGSOUND && tn !== $.BR && tn !== $.BR && tn !== $.COL && tn !== $.EMBED && tn !== $.FRAME && tn !== $.HR && tn !== $.IMG && tn !== $.INPUT && tn !== $.KEYGEN && tn !== $.LINK && tn !== $.MENUITEM && tn !== $.META && tn !== $.PARAM && tn !== $.SOURCE && tn !== $.TRACK && tn !== $.WBR) {\n    if (tn === $.PRE || tn === $.TEXTAREA || tn === $.LISTING) {\n      var firstChild = this.treeAdapter.getFirstChild(node);\n\n      if (firstChild && this.treeAdapter.isTextNode(firstChild)) {\n        var content = this.treeAdapter.getTextNodeContent(firstChild);\n        if (content[0] === '\\n') this.html += '\\n';\n      }\n    }\n\n    var childNodesHolder = tn === $.TEMPLATE && ns === NS.HTML ? this.treeAdapter.getChildNodes(node)[0] : node;\n\n    this._serializeChildNodes(childNodesHolder);\n\n    this.html += '</' + tn + '>';\n  }\n};\n\nSerializer.prototype._serializeAttributes = function (node) {\n  var attrs = this.treeAdapter.getAttrList(node);\n\n  for (var i = 0, attrsLength = attrs.length; i < attrsLength; i++) {\n    var attr = attrs[i],\n        value = this.options.encodeHtmlEntities ? escapeString(attr.value, true) : attr.value;\n    this.html += ' ';\n    if (!attr.namespace) this.html += attr.name;else if (attr.namespace === NS.XML) this.html += 'xml:' + attr.name;else if (attr.namespace === NS.XMLNS) {\n      if (attr.name !== 'xmlns') this.html += 'xmlns:';\n      this.html += attr.name;\n    } else if (attr.namespace === NS.XLINK) this.html += 'xlink:' + attr.name;else this.html += attr.namespace + ':' + attr.name;\n    this.html += '=\"' + value + '\"';\n  }\n};\n\nSerializer.prototype._serializeTextNode = function (node) {\n  var content = this.treeAdapter.getTextNodeContent(node),\n      parent = this.treeAdapter.getParentNode(node),\n      parentTn = void 0;\n  if (parent && this.treeAdapter.isElementNode(parent)) parentTn = this.treeAdapter.getTagName(parent);\n\n  if (parentTn === $.STYLE || parentTn === $.SCRIPT || parentTn === $.XMP || parentTn === $.IFRAME || parentTn === $.NOEMBED || parentTn === $.NOFRAMES || parentTn === $.PLAINTEXT || parentTn === $.NOSCRIPT) {\n    this.html += content;\n  } else this.html += this.options.encodeHtmlEntities ? escapeString(content, false) : content;\n};\n\nSerializer.prototype._serializeCommentNode = function (node) {\n  this.html += '<!--' + this.treeAdapter.getCommentNodeContent(node) + '-->';\n};\n\nSerializer.prototype._serializeDocumentTypeNode = function (node) {\n  var name = this.treeAdapter.getDocumentTypeNodeName(node),\n      publicId = this.treeAdapter.getDocumentTypeNodePublicId(node),\n      systemId = this.treeAdapter.getDocumentTypeNodeSystemId(node);\n  this.html += '<' + Doctype.serializeContent(name, publicId, systemId) + '>';\n};","map":{"version":3,"sources":["F:/JavaScript/Projects/chemistryphile/node_modules/jsdom-no-contextify/node_modules/parse5/lib/serialization/serializer.js"],"names":["DefaultTreeAdapter","require","Doctype","Utils","HTML","$","TAG_NAMES","NS","NAMESPACES","DEFAULT_OPTIONS","encodeHtmlEntities","AMP_REGEX","NBSP_REGEX","DOUBLE_QUOTE_REGEX","LT_REGEX","GT_REGEX","escapeString","str","attrMode","replace","Serializer","module","exports","treeAdapter","options","mergeOptions","prototype","serialize","node","html","_serializeChildNodes","parentNode","childNodes","getChildNodes","i","cnLength","length","currentNode","isElementNode","_serializeElement","isTextNode","_serializeTextNode","isCommentNode","_serializeCommentNode","isDocumentTypeNode","_serializeDocumentTypeNode","tn","getTagName","ns","getNamespaceURI","_serializeAttributes","AREA","BASE","BASEFONT","BGSOUND","BR","COL","EMBED","FRAME","HR","IMG","INPUT","KEYGEN","LINK","MENUITEM","META","PARAM","SOURCE","TRACK","WBR","PRE","TEXTAREA","LISTING","firstChild","getFirstChild","content","getTextNodeContent","childNodesHolder","TEMPLATE","attrs","getAttrList","attrsLength","attr","value","namespace","name","XML","XMLNS","XLINK","parent","getParentNode","parentTn","STYLE","SCRIPT","XMP","IFRAME","NOEMBED","NOFRAMES","PLAINTEXT","NOSCRIPT","getCommentNodeContent","getDocumentTypeNodeName","publicId","getDocumentTypeNodePublicId","systemId","getDocumentTypeNodeSystemId","serializeContent"],"mappings":"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","sourcesContent":["'use strict';\r\n\r\nvar DefaultTreeAdapter = require('../tree_adapters/default'),\r\n    Doctype = require('../common/doctype'),\r\n    Utils = require('../common/utils'),\r\n    HTML = require('../common/html');\r\n\r\n//Aliases\r\nvar $ = HTML.TAG_NAMES,\r\n    NS = HTML.NAMESPACES;\r\n\r\n//Default serializer options\r\nvar DEFAULT_OPTIONS = {\r\n    encodeHtmlEntities: true\r\n};\r\n\r\n//Escaping regexes\r\nvar AMP_REGEX = /&/g,\r\n    NBSP_REGEX = /\\u00a0/g,\r\n    DOUBLE_QUOTE_REGEX = /\"/g,\r\n    LT_REGEX = /</g,\r\n    GT_REGEX = />/g;\r\n\r\n//Escape string\r\nfunction escapeString(str, attrMode) {\r\n    str = str\r\n        .replace(AMP_REGEX, '&amp;')\r\n        .replace(NBSP_REGEX, '&nbsp;');\r\n\r\n    if (attrMode)\r\n        str = str.replace(DOUBLE_QUOTE_REGEX, '&quot;');\r\n\r\n    else {\r\n        str = str\r\n            .replace(LT_REGEX, '&lt;')\r\n            .replace(GT_REGEX, '&gt;');\r\n    }\r\n\r\n    return str;\r\n}\r\n\r\n\r\n//Enquote doctype ID\r\n\r\n\r\n\r\n//Serializer\r\nvar Serializer = module.exports = function (treeAdapter, options) {\r\n    this.treeAdapter = treeAdapter || DefaultTreeAdapter;\r\n    this.options = Utils.mergeOptions(DEFAULT_OPTIONS, options);\r\n};\r\n\r\n\r\n//API\r\nSerializer.prototype.serialize = function (node) {\r\n    this.html = '';\r\n    this._serializeChildNodes(node);\r\n\r\n    return this.html;\r\n};\r\n\r\n\r\n//Internals\r\nSerializer.prototype._serializeChildNodes = function (parentNode) {\r\n    var childNodes = this.treeAdapter.getChildNodes(parentNode);\r\n\r\n    if (childNodes) {\r\n        for (var i = 0, cnLength = childNodes.length; i < cnLength; i++) {\r\n            var currentNode = childNodes[i];\r\n\r\n            if (this.treeAdapter.isElementNode(currentNode))\r\n                this._serializeElement(currentNode);\r\n\r\n            else if (this.treeAdapter.isTextNode(currentNode))\r\n                this._serializeTextNode(currentNode);\r\n\r\n            else if (this.treeAdapter.isCommentNode(currentNode))\r\n                this._serializeCommentNode(currentNode);\r\n\r\n            else if (this.treeAdapter.isDocumentTypeNode(currentNode))\r\n                this._serializeDocumentTypeNode(currentNode);\r\n        }\r\n    }\r\n};\r\n\r\nSerializer.prototype._serializeElement = function (node) {\r\n    var tn = this.treeAdapter.getTagName(node),\r\n        ns = this.treeAdapter.getNamespaceURI(node);\r\n\r\n    this.html += '<' + tn;\r\n    this._serializeAttributes(node);\r\n    this.html += '>';\r\n\r\n    if (tn !== $.AREA && tn !== $.BASE && tn !== $.BASEFONT && tn !== $.BGSOUND && tn !== $.BR && tn !== $.BR &&\r\n        tn !== $.COL && tn !== $.EMBED && tn !== $.FRAME && tn !== $.HR && tn !== $.IMG && tn !== $.INPUT &&\r\n        tn !== $.KEYGEN && tn !== $.LINK && tn !== $.MENUITEM && tn !== $.META && tn !== $.PARAM && tn !== $.SOURCE &&\r\n        tn !== $.TRACK && tn !== $.WBR) {\r\n\r\n        if (tn === $.PRE || tn === $.TEXTAREA || tn === $.LISTING) {\r\n            var firstChild = this.treeAdapter.getFirstChild(node);\r\n\r\n            if (firstChild && this.treeAdapter.isTextNode(firstChild)) {\r\n                var content = this.treeAdapter.getTextNodeContent(firstChild);\r\n\r\n                if (content[0] === '\\n')\r\n                    this.html += '\\n';\r\n            }\r\n        }\r\n\r\n        var childNodesHolder = tn === $.TEMPLATE && ns === NS.HTML ?\r\n                               this.treeAdapter.getChildNodes(node)[0] :\r\n                               node;\r\n\r\n        this._serializeChildNodes(childNodesHolder);\r\n        this.html += '</' + tn + '>';\r\n    }\r\n};\r\n\r\nSerializer.prototype._serializeAttributes = function (node) {\r\n    var attrs = this.treeAdapter.getAttrList(node);\r\n\r\n    for (var i = 0, attrsLength = attrs.length; i < attrsLength; i++) {\r\n        var attr = attrs[i],\r\n            value = this.options.encodeHtmlEntities ? escapeString(attr.value, true) : attr.value;\r\n\r\n        this.html += ' ';\r\n\r\n        if (!attr.namespace)\r\n            this.html += attr.name;\r\n\r\n        else if (attr.namespace === NS.XML)\r\n            this.html += 'xml:' + attr.name;\r\n\r\n        else if (attr.namespace === NS.XMLNS) {\r\n            if (attr.name !== 'xmlns')\r\n                this.html += 'xmlns:';\r\n\r\n            this.html += attr.name;\r\n        }\r\n\r\n        else if (attr.namespace === NS.XLINK)\r\n            this.html += 'xlink:' + attr.name;\r\n\r\n        else\r\n            this.html += attr.namespace + ':' + attr.name;\r\n\r\n        this.html += '=\"' + value + '\"';\r\n    }\r\n};\r\n\r\nSerializer.prototype._serializeTextNode = function (node) {\r\n    var content = this.treeAdapter.getTextNodeContent(node),\r\n        parent = this.treeAdapter.getParentNode(node),\r\n        parentTn = void 0;\r\n\r\n    if (parent && this.treeAdapter.isElementNode(parent))\r\n        parentTn = this.treeAdapter.getTagName(parent);\r\n\r\n    if (parentTn === $.STYLE || parentTn === $.SCRIPT || parentTn === $.XMP || parentTn === $.IFRAME ||\r\n        parentTn === $.NOEMBED || parentTn === $.NOFRAMES || parentTn === $.PLAINTEXT || parentTn === $.NOSCRIPT) {\r\n        this.html += content;\r\n    }\r\n\r\n    else\r\n        this.html += this.options.encodeHtmlEntities ? escapeString(content, false) : content;\r\n};\r\n\r\nSerializer.prototype._serializeCommentNode = function (node) {\r\n    this.html += '<!--' + this.treeAdapter.getCommentNodeContent(node) + '-->';\r\n};\r\n\r\nSerializer.prototype._serializeDocumentTypeNode = function (node) {\r\n    var name = this.treeAdapter.getDocumentTypeNodeName(node),\r\n        publicId = this.treeAdapter.getDocumentTypeNodePublicId(node),\r\n        systemId = this.treeAdapter.getDocumentTypeNodeSystemId(node);\r\n\r\n    this.html += '<' + Doctype.serializeContent(name, publicId, systemId) + '>';\r\n};\r\n"]},"metadata":{},"sourceType":"script"}