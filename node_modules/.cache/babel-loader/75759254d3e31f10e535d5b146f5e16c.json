{"ast":null,"code":"// w3c Load/Save functionality: http://www.w3.org/TR/2004/REC-DOM-Level-3-LS-20040407/\nvar core = require('../level1/core');\n\nvar createFrom = require('../utils').createFrom;\n\nvar ls = {}; // TODO: what is this?\n//typedef dom::DOMConfiguration DOMConfiguration;\n\nls.LSException = function LSException(code) {\n  this.code = code;\n};\n\nls.LSException.prototype = {\n  // LSExceptionCode\n  PARSE_ERR: 81,\n  SERIALIZE_ERR: 82\n};\n\nls.DOMImplementationLS = function DOMImplementationLS() {};\n\nvar DOMImplementationExtension = {\n  // DOMImplementationLSMode\n  MODE_SYNCHRONOUS: 1,\n  MODE_ASYNCHRONOUS: 2,\n  // raises(dom::DOMException);\n  createLSParser: function (\n  /* int */\n  mode,\n  /* string */\n  schemaType) {\n    return new ls.LSParser(mode, schemaType);\n  },\n  createLSSerializer: function () {\n    return new ls.LSSerializer();\n  },\n  createLSInput: function () {\n    return new ls.LSInput();\n  },\n  createLSOutput: function () {\n    return new ls.LSOutput();\n  }\n};\nObject.keys(DOMImplementationExtension).forEach(function (k, v) {\n  core.DOMImplementation.prototype[k] = DOMImplementationExtension[k];\n});\nls.DOMImplementationLS.prototype = DOMImplementationExtension;\n\ncore.Document.getFeature = function () {\n  return DOMImplementationExtension;\n};\n\nls.LSParser = function LSParser() {\n  this._domConfig = new core.DOMConfiguration();\n};\n\nls.LSParser.prototype = {\n  get domConfig() {\n    return this._domConfig;\n  },\n\n  get filter() {\n    return this._filter || null;\n  },\n\n  set filter(value) {\n    this._filter = value;\n  },\n\n  get async() {\n    return this._async;\n  },\n\n  get busy() {\n    return this._busy;\n  },\n\n  // raises(dom::DOMException, LSException);\n  parse: function (\n  /* LSInput */\n  input) {\n    var doc = new core.Document();\n    doc._inputEncoding = 'UTF-16';\n    return doc;\n  },\n  // raises(dom::DOMException, LSException);\n  parseURI: function (\n  /* string */\n  uri) {\n    return new core.Document();\n  },\n  // ACTION_TYPES\n  ACTION_APPEND_AS_CHILDREN: 1,\n  ACTION_REPLACE_CHILDREN: 2,\n  ACTION_INSERT_BEFORE: 3,\n  ACTION_INSERT_AFTER: 4,\n  ACTION_REPLACE: 5,\n  // @returns Node\n  // @raises DOMException, LSException\n  parseWithContext: function (\n  /* LSInput */\n  input,\n  /* Node */\n  contextArg,\n  /* int */\n  action) {\n    return new core.Node();\n  },\n  abort: function () {// TODO: implement\n  }\n};\n\nls.LSInput = function LSInput() {};\n\nls.LSInput.prototype = {\n  get characterStream() {\n    return this._characterStream || null;\n  },\n\n  set characterStream(value) {\n    this._characterStream = value;\n  },\n\n  get byteStream() {\n    return this._byteStream || null;\n  },\n\n  set byteStream(value) {\n    this._byteStream = value;\n  },\n\n  get stringData() {\n    return this._stringData || null;\n  },\n\n  set stringData(value) {\n    this._stringData = value;\n  },\n\n  get systemId() {\n    return this._systemId || null;\n  },\n\n  set systemId(value) {\n    this._systemId = value;\n  },\n\n  get publicId() {\n    return this._publicId || null;\n  },\n\n  set publicId(value) {\n    this._publicId = value;\n  },\n\n  get baseURI() {\n    return this._baseURI || null;\n  },\n\n  set baseURI(value) {\n    this._baseURI = value;\n  },\n\n  get encoding() {\n    return this._encoding || null;\n  },\n\n  set encoding(value) {\n    this._encoding = value;\n  },\n\n  get certifiedText() {\n    return this._certifiedText || null;\n  },\n\n  set certifiedText(value) {\n    this._certifiedText = value;\n  }\n\n};\n\nls.LSResourceResolver = function LSResourceResolver() {}; // @returns LSInput\n\n\nls.LSResourceResolver.prototype.resolveResource = function (type, namespaceURI, publicId, systemId, baseURI) {\n  return new ls.LSInput();\n};\n\nls.LSParserFilter = function LSParserFilter() {};\n\nls.LSParserFilter.prototype = {\n  // Constants returned by startElement and acceptNode\n  FILTER_ACCEPT: 1,\n  FILTER_REJECT: 2,\n  FILTER_SKIP: 3,\n  FILTER_INTERRUPT: 4,\n\n  get whatToShow() {\n    return this._whatToShow;\n  },\n\n  // @returns int\n  startElement: function (\n  /* Element */\n  elementArg) {\n    return 0;\n  },\n  // @returns int\n  acceptNode: function (\n  /* Node */\n  nodeArg) {\n    return nodeArg;\n  }\n};\n\nls.LSSerializer = function LSSerializer() {\n  this._domConfig = new core.DOMConfiguration();\n};\n\nls.LSSerializer.prototype = {\n  get domConfig() {\n    return this._domConfig;\n  },\n\n  get newLine() {\n    return this._newLine || null;\n  },\n\n  set newLine(value) {\n    this._newLine = value;\n  },\n\n  get filter() {\n    return this._filter || null;\n  },\n\n  set filter(value) {\n    this._filter = value;\n  },\n\n  // @returns boolean\n  // @raises LSException\n  write: function (\n  /* Node */\n  nodeArg,\n  /* LSOutput */\n  destination) {\n    return true;\n  },\n  // @returns boolean\n  // @raises LSException\n  writeToURI: function (\n  /* Node */\n  nodeArg,\n  /* string */\n  uri) {\n    return true;\n  },\n  // @returns string\n  // @raises DOMException, LSException\n  writeToString: function (\n  /* Node */\n  nodeArg) {\n    return \"\";\n  }\n};\n\nls.LSOutput = function LSOutput() {};\n\nls.LSOutput.prototype = {\n  get characterStream() {\n    return this._characterStream || null;\n  },\n\n  set characterStream(value) {\n    this._characterStream = value;\n  },\n\n  get byteStream() {\n    return this._byteStream || null;\n  },\n\n  set byteStream(value) {\n    this._byteStream = value;\n  },\n\n  get systemId() {\n    return this._systemId || null;\n  },\n\n  set systemId(value) {\n    this._systemId = value;\n  },\n\n  get encoding() {\n    return this._encoding || null;\n  },\n\n  set encoding(value) {\n    this._encoding = value;\n  }\n\n};\n\nls.LSProgressEvent = function LSProgressEvent() {};\n\nls.LSProgressEvent.prototype = createFrom(core.Event, {\n  constructor: ls.LSProgressEvent,\n\n  get input() {\n    return this._input;\n  },\n\n  get position() {\n    return this._position;\n  },\n\n  get totalSize() {\n    return this._totalSize;\n  }\n\n});\n\nls.LSLoadEvent = function LSLoadEvent() {};\n\nls.LSLoadEvent.prototype = createFrom(core.Event, {\n  get newDocument() {\n    return this._newDocument;\n  },\n\n  get input() {\n    return this._input;\n  }\n\n}); // TODO: do traversal\n\nls.LSSerializerFilter = function LSSerializerFilter() {};\n\nls.LSSerializerFilter.prototype = {\n  get whatToShow() {\n    return this._whatToShow;\n  }\n\n}; // ls.LSSerializerFilter.prototype.__proto__ = level2.traversal.NodeFiler;","map":{"version":3,"sources":["F:/JavaScript/Projects/chemistryphile/node_modules/jsdom-no-contextify/lib/jsdom/level3/ls.js"],"names":["core","require","createFrom","ls","LSException","code","prototype","PARSE_ERR","SERIALIZE_ERR","DOMImplementationLS","DOMImplementationExtension","MODE_SYNCHRONOUS","MODE_ASYNCHRONOUS","createLSParser","mode","schemaType","LSParser","createLSSerializer","LSSerializer","createLSInput","LSInput","createLSOutput","LSOutput","Object","keys","forEach","k","v","DOMImplementation","Document","getFeature","_domConfig","DOMConfiguration","domConfig","filter","_filter","value","async","_async","busy","_busy","parse","input","doc","_inputEncoding","parseURI","uri","ACTION_APPEND_AS_CHILDREN","ACTION_REPLACE_CHILDREN","ACTION_INSERT_BEFORE","ACTION_INSERT_AFTER","ACTION_REPLACE","parseWithContext","contextArg","action","Node","abort","characterStream","_characterStream","byteStream","_byteStream","stringData","_stringData","systemId","_systemId","publicId","_publicId","baseURI","_baseURI","encoding","_encoding","certifiedText","_certifiedText","LSResourceResolver","resolveResource","type","namespaceURI","LSParserFilter","FILTER_ACCEPT","FILTER_REJECT","FILTER_SKIP","FILTER_INTERRUPT","whatToShow","_whatToShow","startElement","elementArg","acceptNode","nodeArg","newLine","_newLine","write","destination","writeToURI","writeToString","LSProgressEvent","Event","constructor","_input","position","_position","totalSize","_totalSize","LSLoadEvent","newDocument","_newDocument","LSSerializerFilter"],"mappings":"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","sourcesContent":["// w3c Load/Save functionality: http://www.w3.org/TR/2004/REC-DOM-Level-3-LS-20040407/\n\nvar core = require('../level1/core');\nvar createFrom = require('../utils').createFrom;\n\nvar ls = {};\n\n// TODO: what is this?\n//typedef dom::DOMConfiguration DOMConfiguration;\n\nls.LSException = function LSException(code) {\n  this.code = code;\n};\n\nls.LSException.prototype = {\n  // LSExceptionCode\n  PARSE_ERR                       : 81,\n  SERIALIZE_ERR                   : 82\n};\n\nls.DOMImplementationLS = function DOMImplementationLS() {\n\n};\n\nvar DOMImplementationExtension = {\n\n  // DOMImplementationLSMode\n  MODE_SYNCHRONOUS  : 1,\n  MODE_ASYNCHRONOUS : 2,\n\n  // raises(dom::DOMException);\n  createLSParser : function(/* int */ mode, /* string */ schemaType) {\n    return new ls.LSParser(mode, schemaType);\n  },\n\n  createLSSerializer : function() {\n    return new ls.LSSerializer();\n  },\n\n  createLSInput : function() {\n    return new ls.LSInput();\n  },\n\n  createLSOutput : function() {\n    return new ls.LSOutput();\n  }\n};\n\nObject.keys(DOMImplementationExtension).forEach(function(k, v) {\n  core.DOMImplementation.prototype[k] = DOMImplementationExtension[k];\n});\n\nls.DOMImplementationLS.prototype = DOMImplementationExtension;\n\ncore.Document.getFeature = function() {\n  return DOMImplementationExtension;\n};\n\nls.LSParser = function LSParser() {\n  this._domConfig = new core.DOMConfiguration();\n};\nls.LSParser.prototype = {\n  get domConfig() { return this._domConfig; },\n  get filter() { return this._filter || null; },\n  set filter(value) { this._filter = value; },\n  get async() { return this._async; },\n  get busy() { return this._busy; },\n\n  // raises(dom::DOMException, LSException);\n  parse : function (/* LSInput */ input) {\n    var doc = new core.Document();\n    doc._inputEncoding = 'UTF-16';\n    return doc;\n  },\n\n  // raises(dom::DOMException, LSException);\n  parseURI : function(/* string */ uri) {\n    return new core.Document();\n  },\n\n  // ACTION_TYPES\n  ACTION_APPEND_AS_CHILDREN       : 1,\n  ACTION_REPLACE_CHILDREN         : 2,\n  ACTION_INSERT_BEFORE            : 3,\n  ACTION_INSERT_AFTER             : 4,\n  ACTION_REPLACE                  : 5,\n\n  // @returns Node\n  // @raises DOMException, LSException\n  parseWithContext                : function(/* LSInput */ input, /* Node */ contextArg, /* int */ action) {\n    return new core.Node();\n  },\n\n  abort                           : function() {\n    // TODO: implement\n  }\n};\n\nls.LSInput = function LSInput() {};\nls.LSInput.prototype = {\n  get characterStream() { return this._characterStream || null; },\n  set characterStream(value) { this._characterStream = value; },\n  get byteStream() { return this._byteStream || null; },\n  set byteStream(value) { this._byteStream = value; },\n  get stringData() { return this._stringData || null; },\n  set stringData(value) { this._stringData = value; },\n  get systemId() { return this._systemId || null; },\n  set systemId(value) { this._systemId = value; },\n  get publicId() { return this._publicId || null; },\n  set publicId(value) { this._publicId = value; },\n  get baseURI() { return this._baseURI || null; },\n  set baseURI(value) { this._baseURI = value; },\n  get encoding() { return this._encoding || null; },\n  set encoding(value) { this._encoding = value; },\n  get certifiedText() { return this._certifiedText || null; },\n  set certifiedText(value) { this._certifiedText = value; },\n};\n\nls.LSResourceResolver = function LSResourceResolver() {};\n\n// @returns LSInput\nls.LSResourceResolver.prototype.resolveResource = function(type, namespaceURI, publicId, systemId, baseURI) {\n  return new ls.LSInput();\n};\n\nls.LSParserFilter = function LSParserFilter() {};\nls.LSParserFilter.prototype = {\n\n  // Constants returned by startElement and acceptNode\n  FILTER_ACCEPT                   : 1,\n  FILTER_REJECT                   : 2,\n  FILTER_SKIP                     : 3,\n  FILTER_INTERRUPT                : 4,\n\n  get whatToShow() { return this._whatToShow; },\n\n  // @returns int\n  startElement : function(/* Element */ elementArg) {\n    return 0;\n  },\n\n  // @returns int\n  acceptNode : function(/* Node */ nodeArg) {\n    return nodeArg;\n  }\n};\n\nls.LSSerializer = function LSSerializer() {\n  this._domConfig = new core.DOMConfiguration();\n};\nls.LSSerializer.prototype = {\n  get domConfig() { return this._domConfig; },\n  get newLine() { return this._newLine || null; },\n  set newLine(value) { this._newLine = value; },\n  get filter() { return this._filter || null; },\n  set filter(value) { this._filter = value; },\n\n  // @returns boolean\n  // @raises LSException\n  write : function(/* Node */ nodeArg, /* LSOutput */ destination) {\n   return true;\n  },\n\n  // @returns boolean\n  // @raises LSException\n  writeToURI : function(/* Node */ nodeArg, /* string */ uri) {\n   return true;\n  },\n\n  // @returns string\n  // @raises DOMException, LSException\n  writeToString : function(/* Node */ nodeArg) {\n    return \"\";\n  }\n};\n\nls.LSOutput = function LSOutput() {};\nls.LSOutput.prototype = {\n  get characterStream() { return this._characterStream || null; },\n  set characterStream(value) { this._characterStream = value; },\n  get byteStream() { return this._byteStream || null; },\n  set byteStream(value) { this._byteStream = value; },\n  get systemId() { return this._systemId || null; },\n  set systemId(value) { this._systemId = value; },\n  get encoding() { return this._encoding || null; },\n  set encoding(value) { this._encoding = value; },\n};\n\nls.LSProgressEvent = function LSProgressEvent() {};\nls.LSProgressEvent.prototype = createFrom(core.Event, {\n  constructor: ls.LSProgressEvent,\n  get input() { return this._input; },\n  get position() { return this._position; },\n  get totalSize() { return this._totalSize; },\n});\n\nls.LSLoadEvent = function LSLoadEvent() {};\nls.LSLoadEvent.prototype = createFrom(core.Event, {\n  get newDocument() { return this._newDocument; },\n  get input() { return this._input; },\n});\n\n\n// TODO: do traversal\nls.LSSerializerFilter = function LSSerializerFilter() {};\nls.LSSerializerFilter.prototype = {\n  get whatToShow() { return this._whatToShow; },\n};\n\n// ls.LSSerializerFilter.prototype.__proto__ = level2.traversal.NodeFiler;\n\n"]},"metadata":{},"sourceType":"script"}